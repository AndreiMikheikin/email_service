# Email Service Platform

–ü—É–±–ª–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ HTML-–ø–∏—Å–µ–º —á–µ—Ä–µ–∑ SMTP —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª—å—é –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∫–ª–∏–µ–Ω—Ç–∞.

## üì¶ –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

root/
‚îú‚îÄ‚îÄ email_service/ # Backend (Node.js + Express)
‚îú‚îÄ‚îÄ apps/
‚îÇ ‚îú‚îÄ‚îÄ admin-spa/ # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (Vite + React)
‚îÇ ‚îî‚îÄ‚îÄ client-spa/ # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–ª–∏–µ–Ω—Ç–∞ (Vite + React)

## üåê –ü–æ—Ä—Ç—ã –∏ –∞–¥—Ä–µ—Å–∞

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ       | –ê–¥—Ä–µ—Å/–ü–æ—Ä—Ç                   |
|------------------|------------------------------|
| –ê–¥–º–∏–Ω SPA        | http://178.250.247.67:3344   |
| –ö–ª–∏–µ–Ω—Ç SPA       | http://178.250.247.67:3345   |
| Backend API      | http://178.250.247.67:3355   |

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### üß∞ Backend (`email_service`)
- **–°—Ç–µ–∫:** Node.js, Express
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

src/
‚îú‚îÄ‚îÄ config/ # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤–∫–ª—é—á–∞—è –ë–î)
‚îú‚îÄ‚îÄ controllers/ # –õ–æ–≥–∏–∫–∞ API
‚îú‚îÄ‚îÄ models/ # –†–∞–±–æ—Ç–∞ —Å –ë–î (–Ω–∞–ø—Ä–∏–º–µ—Ä, users, pool_of_users)
‚îú‚îÄ‚îÄ routes/ # API-–º–∞—Ä—à—Ä—É—Ç—ã
‚îú‚îÄ‚îÄ services/ # SMTP, JWT –∏ –ø—Ä.
‚îú‚îÄ‚îÄ utils/ # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ middlewares/ # –ü—Ä–æ–≤–µ—Ä–∫–∏, auth
‚îî‚îÄ‚îÄ jobs/ # (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏) —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏

- **–§—É–Ω–∫—Ü–∏–∏:**
  - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (JWT, bcrypt)
  - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
  - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
  - Zero-time deploy (PM2 + GitHub Actions)
  - –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º —á–µ—Ä–µ–∑ SMTP
  - CRUD –¥–ª—è:
    - client-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    - email-–∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
    - —à–∞–±–ª–æ–Ω–æ–≤ –ø–∏—Å–µ–º
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è `sitemap.xml` –∏ –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è

- **–ë–î:**
  - `users` ‚Äî –∞–¥–º–∏–Ω—ã (–¥–æ—Å—Ç—É–ø –∫ `admin-spa`)
  - `pool_of_users` ‚Äî –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–ø—Ä–∏–≤—è–∑–∫–∞ —á–µ—Ä–µ–∑ `admin_id`)

---

### üßë‚Äçüíº `admin-spa`
- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** Vite + React
- **–°—Ç–∏–ª–∏:** SCSS —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `aam_`, —Ç—ë–º–Ω–æ-–∑–µ–ª—ë–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞
- **–§–∏—á–∏:**
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
  - –°–±—Ä–æ—Å/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
  - CRUD client-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–Ω–æ–π –∫–Ω–∏–≥–æ–π –∏ —à–∞–±–ª–æ–Ω–∞–º–∏
  - –û—Ç–ø—Ä–∞–≤–∫–∞ email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–æ–≤—ã–º client-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
  - –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ `admin_id`

---

### üë§ `client-spa`
- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** Vite + React
- **–°—Ç–∏–ª–∏:** SCSS, –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å
- **–§–∏—á–∏:**
  - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è client-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`pool_of_users`)
  - –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –ø–æ –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é, –≤—ã–¥–∞–Ω–Ω—ã–º –∞–¥–º–∏–Ω–æ–º
  - –ü—Ä–æ—Å–º–æ—Ç—Ä:
    - Email-–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è (–µ–≥–æ email)
    - –ê–¥—Ä–µ—Å–Ω–æ–π –∫–Ω–∏–≥–∏
    - HTML-—à–∞–±–ª–æ–Ω–æ–≤
  - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º
  - –í—Å—è —Ä–∞–±–æ—Ç–∞ —Å—Ç—Ä–æ–≥–æ –≤ —Ä–∞–º–∫–∞—Ö `admin_id`

---

## ‚öôÔ∏è .env

–ü—Ä–∏–º–µ—Ä `.env` –¥–ª—è `email_service`:

PORT=3355
JWT_SECRET=your_jwt_secret
SMTP_USER=you@example.com
SMTP_PASS=your_password

–ü—Ä–∏–º–µ—Ä `.env` –¥–ª—è Vite (–æ–±–∞ SPA):

VITE_API_URL=http://178.250.247.67:3355

---

## ‚úÖ –¢–µ—Å—Ç—ã

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: `jest`, `supertest`
- –ü–æ–∫—Ä—ã—Ç–∏–µ:
  - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`auth.test.js`)
  - CRUD client-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
  - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è JWT

---

## üõ∞ –î–µ–ø–ª–æ–π

- –ù–∞—Å—Ç—Ä–æ–µ–Ω zero-downtime –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑:
  - **GitHub Actions** (`.github/workflows/deploy.yml`)
  - **PM2** (`ecosystem.config.js`)
- SPA —Å–æ–±–∏—Ä–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Vite –∏ –¥–µ–ø–ª–æ—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

---

## üìå –ü—Ä–æ—á–µ–µ

- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω CORS —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π credentials (`Access-Control-Allow-Credentials`)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `axios` —Å `withCredentials: true` –≤ SPA
- –ü—Ä–æ–∫—Å–∏ Vite (`/api`) –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø–æ—Ä—Ç `3355`
- –ü—Ä–µ—Ñ–∏–ª—å—Ç—Ä—ã (`OPTIONS`) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è Express –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---